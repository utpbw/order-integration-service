2025-10-23 15:06:24,199 - INFO - [PID:1] - Integrations-Service startet...
2025-10-23 15:06:24,200 - INFO - [PID:1] - WMS Status Listener Thread startet...
2025-10-23 15:06:24,200 - INFO - [PID:1] - WMS Status Listener Thread gestartet.
2025-10-23 15:06:24,203 - ERROR - [PID:1] - Socket failed to connect: <socket.socket fd=17, family=2, type=1, proto=6, laddr=('172.18.0.5', 49892)>; error=111 (Connection refused)
2025-10-23 15:06:24,203 - ERROR - [PID:1] - TCP Connection attempt failed: ConnectionRefusedError(111, 'Connection refused'); dest=(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('172.18.0.2', 5672))
2025-10-23 15:06:24,203 - ERROR - [PID:1] - AMQPConnector - reporting failure: AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused')
2025-10-23 15:06:24,203 - ERROR - [PID:1] - AMQP connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None.
2025-10-23 15:06:24,203 - ERROR - [PID:1] - AMQPConnectionWorkflow - reporting failure: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-10-23 15:06:24,203 - ERROR - [PID:1] - Connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-10-23 15:06:24,203 - ERROR - [PID:1] - Error in _create_connection().
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/pika/adapters/blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
pika.exceptions.AMQPConnectionError
2025-10-23 15:06:24,204 - WARNING - [PID:1] - WMS Listener: Verbindung zu RabbitMQ verloren. Versuche Reconnect in 10s...
2025-10-23 15:06:34,239 - INFO - [PID:1] - [WMS-STATUS] Listener ist aktiv und lauscht auf Updates.
2025-10-23 15:09:36,725 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Neue Bestellung vom OMS API erhalten.
2025-10-23 15:09:36,732 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1001) angenommen.
2025-10-23 15:09:36,751 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Starte Verarbeitung.
2025-10-23 15:09:36,752 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-10-23 15:09:36,809 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1001-1761232176)
2025-10-23 15:09:36,810 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 2: Führe Zahlung durch (PS)...
2025-10-23 15:09:36,881 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-10-23 15:09:36,881 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zahlung erfolgreich. (TxID: tr_c07e0209-6e72-4d63-ae03-d0b06739dc55)
2025-10-23 15:09:36,881 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-10-23 15:09:36,890 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-10-23 15:09:36,890 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Versandanweisung an WMS-Queue gesendet.
2025-10-23 15:09:36,890 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-10-23 15:09:39,931 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-10-23T15:09:39Z'}
2025-10-23 15:09:42,932 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-10-23T15:09:42Z'}
2025-10-23 15:09:44,934 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-10-23T15:09:44Z', 'trackingNumber': 'TRK12345ABC'}
2025-10-23 15:12:00,035 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Neue Bestellung vom OMS API erhalten.
2025-10-23 15:12:00,038 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1002) angenommen.
2025-10-23 15:12:00,044 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Starte Verarbeitung.
2025-10-23 15:12:00,044 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-10-23 15:12:00,068 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1002] Storniert: Artikel nicht auf Lager (OUT_OF_STOCK).
2025-10-24 01:32:48,106 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Neue Bestellung vom OMS API erhalten.
2025-10-24 01:32:48,110 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1002) angenommen.
2025-10-24 01:32:48,121 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Starte Verarbeitung.
2025-10-24 01:32:48,127 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-10-24 01:32:48,174 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1002] Storniert: Artikel nicht auf Lager (OUT_OF_STOCK).
2025-10-24 01:33:15,188 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-10-24 01:33:15,191 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-10-24 01:33:15,195 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-10-24 01:33:15,196 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-10-24 01:33:15,230 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1761269595)
2025-10-24 01:33:15,231 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-10-24 01:33:15,434 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-10-24 01:33:15,435 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung erfolgreich. (TxID: tr_c7e820dd-379b-464f-822d-046b84d771bc)
2025-10-24 01:33:15,435 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-10-24 01:33:15,500 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-10-24 01:33:15,500 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Versandanweisung an WMS-Queue gesendet.
2025-10-24 01:33:15,502 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-10-24 01:33:18,555 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-10-24T01:33:18Z'}
2025-10-24 01:33:21,558 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-10-24T01:33:21Z'}
2025-10-24 01:33:23,566 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-10-24T01:33:23Z', 'trackingNumber': 'TRK12345ABC'}
2025-10-24 01:35:52,892 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-10-24 01:35:52,896 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-10-24 01:35:52,903 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-10-24 01:35:52,905 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-10-24 01:35:52,928 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1761269752)
2025-10-24 01:35:52,928 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-10-24 01:35:52,955 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-10-24 01:35:52,956 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung erfolgreich. (TxID: tr_ac14b874-8dd7-4f11-aaab-d535fb289ab2)
2025-10-24 01:35:52,956 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-10-24 01:35:52,984 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-10-24 01:35:52,985 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Versandanweisung an WMS-Queue gesendet.
2025-10-24 01:35:52,986 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-10-24 01:35:56,026 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-10-24T01:35:56Z'}
2025-10-24 01:35:59,031 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-10-24T01:35:59Z'}
2025-10-24 01:36:01,037 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-10-24T01:36:01Z', 'trackingNumber': 'TRK12345ABC'}
2025-11-03 14:55:05,469 - INFO - [PID:1] - Integrations-Service startet...
2025-11-03 14:55:05,470 - INFO - [PID:1] - WMS Status Listener Thread startet...
2025-11-03 14:55:05,470 - INFO - [PID:1] - WMS Status Listener Thread gestartet.
2025-11-03 14:55:05,476 - ERROR - [PID:1] - Socket failed to connect: <socket.socket fd=15, family=2, type=1, proto=6, laddr=('172.18.0.5', 44434)>; error=111 (Connection refused)
2025-11-03 14:55:05,477 - ERROR - [PID:1] - TCP Connection attempt failed: ConnectionRefusedError(111, 'Connection refused'); dest=(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('172.18.0.4', 5672))
2025-11-03 14:55:05,477 - ERROR - [PID:1] - AMQPConnector - reporting failure: AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused')
2025-11-03 14:55:05,477 - ERROR - [PID:1] - AMQP connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None.
2025-11-03 14:55:05,478 - ERROR - [PID:1] - AMQPConnectionWorkflow - reporting failure: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-11-03 14:55:05,478 - ERROR - [PID:1] - Connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-11-03 14:55:05,478 - ERROR - [PID:1] - Error in _create_connection().
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/pika/adapters/blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
pika.exceptions.AMQPConnectionError
2025-11-03 14:55:05,479 - WARNING - [PID:1] - WMS Listener: Verbindung zu RabbitMQ verloren. Versuche Reconnect in 10s...
2025-11-03 14:55:09,990 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-11-03 14:55:09,993 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-11-03 14:55:10,003 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-11-03 14:55:10,003 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 14:55:10,023 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1762181710)
2025-11-03 14:55:10,023 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 14:55:10,067 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-11-03 14:55:10,067 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung erfolgreich. (TxID: tr_7fe4d3b5-2d91-4b1e-a9b4-ff53b1f59223)
2025-11-03 14:55:10,068 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-11-03 14:55:10,076 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-11-03 14:55:10,076 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Versandanweisung an WMS-Queue gesendet.
2025-11-03 14:55:10,076 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-11-03 14:55:15,570 - INFO - [PID:1] - [WMS-STATUS] Listener ist aktiv und lauscht auf Updates.
2025-11-03 14:55:15,573 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-11-03T14:55:13Z'}
2025-11-03 14:55:16,180 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-11-03T14:55:16Z'}
2025-11-03 14:55:18,186 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-11-03T14:55:18Z', 'trackingNumber': 'TRK12345ABC'}
2025-11-03 14:56:19,427 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Neue Bestellung vom OMS API erhalten.
2025-11-03 14:56:19,429 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1001) angenommen.
2025-11-03 14:56:19,432 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Starte Verarbeitung.
2025-11-03 14:56:19,433 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 14:56:19,453 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1001-1762181779)
2025-11-03 14:56:19,453 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 14:56:19,480 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-11-03 14:56:19,481 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zahlung erfolgreich. (TxID: tr_5eb78e77-1a70-4fe6-912f-2aa93f64761a)
2025-11-03 14:56:19,482 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-11-03 14:56:19,506 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-11-03 14:56:19,507 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Versandanweisung an WMS-Queue gesendet.
2025-11-03 14:56:19,508 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-11-03 14:56:22,547 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-11-03T14:56:22Z'}
2025-11-03 14:56:25,566 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-11-03T14:56:25Z'}
2025-11-03 14:56:27,571 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-11-03T14:56:27Z', 'trackingNumber': 'TRK12345ABC'}
2025-11-03 14:57:21,333 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Neue Bestellung vom OMS API erhalten.
2025-11-03 14:57:21,335 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1002) angenommen.
2025-11-03 14:57:21,339 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Starte Verarbeitung.
2025-11-03 14:57:21,341 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 14:57:21,355 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1002] Storniert: Artikel nicht auf Lager (OUT_OF_STOCK).
2025-11-03 14:57:48,325 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-11-03 14:57:48,327 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-11-03 14:57:48,334 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-11-03 14:57:48,334 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 14:57:48,350 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1762181868)
2025-11-03 14:57:48,350 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 14:57:48,375 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-11-03 14:57:48,375 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung erfolgreich. (TxID: tr_840c6ef5-a443-4710-b447-58e53f65a69c)
2025-11-03 14:57:48,375 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-11-03 14:57:48,388 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-11-03 14:57:48,388 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Versandanweisung an WMS-Queue gesendet.
2025-11-03 14:57:48,389 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-11-03 14:57:51,408 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-11-03T14:57:51Z'}
2025-11-03 14:57:54,409 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-11-03T14:57:54Z'}
2025-11-03 14:57:56,416 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1003] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1003', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-11-03T14:57:56Z', 'trackingNumber': 'TRK12345ABC'}
2025-11-03 15:02:41,791 - INFO - [PID:1] - Integrations-Service startet...
2025-11-03 15:02:41,792 - INFO - [PID:1] - WMS Status Listener Thread startet...
2025-11-03 15:02:41,792 - INFO - [PID:1] - WMS Status Listener Thread gestartet.
2025-11-03 15:02:41,796 - ERROR - [PID:1] - Socket failed to connect: <socket.socket fd=16, family=2, type=1, proto=6, laddr=('172.18.0.5', 57264)>; error=111 (Connection refused)
2025-11-03 15:02:41,797 - ERROR - [PID:1] - TCP Connection attempt failed: ConnectionRefusedError(111, 'Connection refused'); dest=(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('172.18.0.3', 5672))
2025-11-03 15:02:41,797 - ERROR - [PID:1] - AMQPConnector - reporting failure: AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused')
2025-11-03 15:02:41,797 - ERROR - [PID:1] - AMQP connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None.
2025-11-03 15:02:41,797 - ERROR - [PID:1] - AMQPConnectionWorkflow - reporting failure: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-11-03 15:02:41,798 - ERROR - [PID:1] - Connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-11-03 15:02:41,798 - ERROR - [PID:1] - Error in _create_connection().
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/pika/adapters/blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
pika.exceptions.AMQPConnectionError
2025-11-03 15:02:41,798 - WARNING - [PID:1] - WMS Listener: Verbindung zu RabbitMQ verloren. Versuche Reconnect in 10s...
2025-11-03 15:02:50,920 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-11-03 15:02:50,921 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-11-03 15:02:50,934 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-11-03 15:02:50,935 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 15:02:50,956 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1762182170)
2025-11-03 15:02:50,957 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 15:02:51,006 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 402 Payment Required"
2025-11-03 15:02:51,006 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung abgelehnt: {'detail': {'errorCode': 'payment_declined', 'message': 'Karte abgelehnt.'}}
2025-11-03 15:02:51,007 - ERROR - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung fehlgeschlagen (HTTP 402). Starte Kompensation.
2025-11-03 15:02:51,007 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation: Sende 'ReleaseItems' an IS.
2025-11-03 15:02:51,008 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation erfolgreich. Workflow gestoppt.
2025-11-03 15:02:51,825 - INFO - [PID:1] - [WMS-STATUS] Listener ist aktiv und lauscht auf Updates.
2025-11-03 15:03:03,806 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-11-03 15:03:03,808 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-11-03 15:03:03,815 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-11-03 15:03:03,815 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 15:03:03,825 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1762182183)
2025-11-03 15:03:03,826 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 15:03:03,839 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 402 Payment Required"
2025-11-03 15:03:03,839 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung abgelehnt: {'detail': {'errorCode': 'payment_declined', 'message': 'Karte abgelehnt.'}}
2025-11-03 15:03:03,839 - ERROR - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung fehlgeschlagen (HTTP 402). Starte Kompensation.
2025-11-03 15:03:03,839 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation: Sende 'ReleaseItems' an IS.
2025-11-03 15:03:03,840 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation erfolgreich. Workflow gestoppt.
2025-11-03 15:03:28,003 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Neue Bestellung vom OMS API erhalten.
2025-11-03 15:03:28,005 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1002) angenommen.
2025-11-03 15:03:28,008 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Starte Verarbeitung.
2025-11-03 15:03:28,009 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 15:03:28,024 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1002] Storniert: Artikel nicht auf Lager (OUT_OF_STOCK).
2025-11-03 15:03:56,233 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-11-03 15:03:56,237 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-11-03 15:03:56,240 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-11-03 15:03:56,241 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 15:03:56,259 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1762182236)
2025-11-03 15:03:56,260 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 15:03:56,284 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 402 Payment Required"
2025-11-03 15:03:56,285 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung abgelehnt: {'detail': {'errorCode': 'payment_declined', 'message': 'Karte abgelehnt.'}}
2025-11-03 15:03:56,285 - ERROR - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung fehlgeschlagen (HTTP 402). Starte Kompensation.
2025-11-03 15:03:56,286 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation: Sende 'ReleaseItems' an IS.
2025-11-03 15:03:56,287 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation erfolgreich. Workflow gestoppt.
2025-11-03 15:08:34,506 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Neue Bestellung vom OMS API erhalten.
2025-11-03 15:08:34,513 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1001) angenommen.
2025-11-03 15:08:34,517 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Starte Verarbeitung.
2025-11-03 15:08:34,521 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-03 15:08:34,546 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1001-1762182514)
2025-11-03 15:08:34,546 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 2: Führe Zahlung durch (PS)...
2025-11-03 15:08:34,579 - INFO - [PID:1] - HTTP Request: POST http://mock_payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-11-03 15:08:34,580 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zahlung erfolgreich. (TxID: tr_f270b046-46c2-4455-aeab-0d21512e3c19)
2025-11-03 15:08:34,580 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-11-03 15:08:34,603 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-11-03 15:08:34,604 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Versandanweisung an WMS-Queue gesendet.
2025-11-03 15:08:34,604 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-11-03 15:08:37,629 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-11-03T15:08:37Z'}
2025-11-03 15:08:40,632 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-11-03T15:08:40Z'}
2025-11-03 15:08:42,637 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-11-03T15:08:42Z', 'trackingNumber': 'TRK12345ABC'}
2025-11-06 17:11:44,523 - ERROR - [PID:1] - Unexpected connection close detected: ConnectionClosedByBroker: (320) "CONNECTION_FORCED - broker forced connection closure with reason 'shutdown'"
2025-11-06 17:11:44,573 - WARNING - [PID:1] - WMS Listener: Verbindung zu RabbitMQ verloren. Versuche Reconnect in 10s...
2025-11-13 13:41:27,040 - INFO - [PID:1] - Integrations-Service startet...
2025-11-13 13:41:27,040 - INFO - [PID:1] - WMS Status Listener Thread startet...
2025-11-13 13:41:27,040 - INFO - [PID:1] - WMS Status Listener Thread gestartet.
2025-11-13 13:41:27,042 - ERROR - [PID:1] - Socket failed to connect: <socket.socket fd=15, family=2, type=1, proto=6, laddr=('172.18.0.6', 44720)>; error=111 (Connection refused)
2025-11-13 13:41:27,042 - ERROR - [PID:1] - TCP Connection attempt failed: ConnectionRefusedError(111, 'Connection refused'); dest=(<AddressFamily.AF_INET: 2>, <SocketKind.SOCK_STREAM: 1>, 6, '', ('172.18.0.4', 5672))
2025-11-13 13:41:27,043 - ERROR - [PID:1] - AMQPConnector - reporting failure: AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused')
2025-11-13 13:41:27,043 - ERROR - [PID:1] - AMQP connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None.
2025-11-13 13:41:27,043 - ERROR - [PID:1] - AMQPConnectionWorkflow - reporting failure: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-11-13 13:41:27,043 - ERROR - [PID:1] - Connection workflow failed: AMQPConnectionWorkflowFailed: 1 exceptions in all; last exception - AMQPConnectorSocketConnectError: ConnectionRefusedError(111, 'Connection refused'); first exception - None
2025-11-13 13:41:27,043 - ERROR - [PID:1] - Error in _create_connection().
Traceback (most recent call last):
  File "/usr/local/lib/python3.12/site-packages/pika/adapters/blocking_connection.py", line 451, in _create_connection
    raise self._reap_last_connection_workflow_error(error)
pika.exceptions.AMQPConnectionError
2025-11-13 13:41:27,044 - WARNING - [PID:1] - WMS Listener: Verbindung zu RabbitMQ verloren. Versuche Reconnect in 10s...
2025-11-13 13:41:37,074 - INFO - [PID:1] - [WMS-STATUS] Listener ist aktiv und lauscht auf Updates.
2025-11-13 13:45:14,141 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Neue Bestellung vom OMS API erhalten.
2025-11-13 13:45:14,143 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1001) angenommen.
2025-11-13 13:45:14,154 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Starte Verarbeitung.
2025-11-13 13:45:14,155 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-13 13:45:14,185 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1001-1763041514)
2025-11-13 13:45:14,185 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 2: Führe Zahlung durch (PS)...
2025-11-13 13:45:14,235 - INFO - [PID:1] - HTTP Request: POST http://payment_service:8001/v2/charges "HTTP/1.1 200 OK"
2025-11-13 13:45:14,236 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Zahlung erfolgreich. (TxID: tr_8442ac3b-bf1c-446c-84da-0ad92bb4094a)
2025-11-13 13:45:14,236 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Schritt 3: Sende Auftrag an WMS (MQ)...
2025-11-13 13:45:14,243 - INFO - [PID:1] - WMS Client mit RabbitMQ verbunden.
2025-11-13 13:45:14,243 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Versandanweisung an WMS-Queue gesendet.
2025-11-13 13:45:14,245 - INFO - [PID:1] - [Order: ORD-2025-10-23-1001] Verarbeitung erfolgreich abgeschlossen. Warte auf WMS-Updates.
2025-11-13 13:45:17,262 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ITEMS_PICKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ITEMS_PICKED', 'updateTimestamp': '2025-11-13T13:45:17Z'}
2025-11-13 13:45:20,269 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_PACKED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_PACKED', 'updateTimestamp': '2025-11-13T13:45:20Z'}
2025-11-13 13:45:22,273 - INFO - [PID:1] - [WMS-STATUS][Order: ORD-2025-10-23-1001] Status-Update: ORDER_SHIPPED. Details: {'orderId': 'ORD-2025-10-23-1001', 'status': 'ORDER_SHIPPED', 'updateTimestamp': '2025-11-13T13:45:22Z', 'trackingNumber': 'TRK12345ABC'}
2025-11-13 13:45:59,532 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Neue Bestellung vom OMS API erhalten.
2025-11-13 13:45:59,533 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1003) angenommen.
2025-11-13 13:45:59,535 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Starte Verarbeitung.
2025-11-13 13:45:59,536 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-13 13:45:59,544 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Inventar erfolgreich reserviert. (ID: res-ORD-2025-10-23-1003-1763041559)
2025-11-13 13:45:59,544 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Schritt 2: Führe Zahlung durch (PS)...
2025-11-13 13:45:59,555 - INFO - [PID:1] - HTTP Request: POST http://payment_service:8001/v2/charges "HTTP/1.1 402 Payment Required"
2025-11-13 13:45:59,555 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung abgelehnt: {'detail': {'errorCode': 'payment_declined', 'message': 'Karte abgelehnt.'}}
2025-11-13 13:45:59,556 - ERROR - [PID:1] - [Order: ORD-2025-10-23-1003] Zahlung fehlgeschlagen (HTTP 402). Starte Kompensation.
2025-11-13 13:45:59,556 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation: Sende 'ReleaseItems' an IS.
2025-11-13 13:45:59,557 - INFO - [PID:1] - [Order: ORD-2025-10-23-1003] Kompensation erfolgreich. Workflow gestoppt.
2025-11-13 13:46:17,713 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Neue Bestellung vom OMS API erhalten.
2025-11-13 13:46:17,714 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Zur Hintergrundverarbeitung (ID: proc-ORD-2025-10-23-1002) angenommen.
2025-11-13 13:46:17,716 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Starte Verarbeitung.
2025-11-13 13:46:17,717 - INFO - [PID:1] - [Order: ORD-2025-10-23-1002] Schritt 1: Prüfe und reserviere Inventar (IS)...
2025-11-13 13:46:17,726 - WARNING - [PID:1] - [Order: ORD-2025-10-23-1002] Storniert: Artikel nicht auf Lager (OUT_OF_STOCK).
